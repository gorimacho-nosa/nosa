<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®returnçœç•¥è¨˜æ³•</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .syntax-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .syntax-block {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border: 2px solid #48bb78;
        }
        
        .equivalent {
            text-align: center;
            font-size: 2rem;
            color: #48bb78;
            margin: 1rem 0;
        }
        
        .rule-box {
            background: #e6f3ff;
            border-left: 4px solid #3182ce;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            .syntax-comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div style="text-align: right; padding: 10px;">
            <a href="promise.html" style="color: white; text-decoration: none; font-size: 16px; background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 8px; transition: background 0.3s;">â† Promiseã‚¬ã‚¤ãƒ‰ã«æˆ»ã‚‹</a>
        </div>
        <h1>ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®return<br>çœç•¥è¨˜æ³•</h1>
        <p class="subtitle">ã„ã¤returnã‚’çœç•¥ã§ãã‚‹ï¼Ÿ</p>
    </header>

    <main>
        <section>
            <h2>ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®2ã¤ã®æ›¸ãæ–¹</h2>
            
            <div class="rule-box">
                <h3>ğŸ“ åŸºæœ¬ãƒ«ãƒ¼ãƒ«</h3>
                <p>ã‚¢ãƒ­ãƒ¼é–¢æ•°ã§ã¯ã€<strong>æ³¢æ‹¬å¼§ {} ã‚’ä½¿ã‚ãªã„å ´åˆã€è‡ªå‹•çš„ã«returnã•ã‚Œã¾ã™ï¼</strong></p>
            </div>
            
            <div class="syntax-comparison">
                <div class="syntax-block">
                    <h3>çœç•¥è¨˜æ³•ï¼ˆæ³¢æ‹¬å¼§ãªã—ï¼‰</h3>
                    <pre><code>// è‡ªå‹•çš„ã«returnã•ã‚Œã‚‹
response => response.json()

// ã“ã‚Œã¯ä»¥ä¸‹ã¨åŒã˜æ„å‘³ï¼š
response => {
    return response.json();
}</code></pre>
                </div>
                
                <div class="syntax-block">
                    <h3>é€šå¸¸è¨˜æ³•ï¼ˆæ³¢æ‹¬å¼§ã‚ã‚Šï¼‰</h3>
                    <pre><code>// æ˜ç¤ºçš„ãªreturnãŒå¿…è¦
response => {
    return response.json();
}

// returnãŒãªã„ã¨undefinedã«ï¼
response => {
    response.json(); // âŒ
}</code></pre>
                </div>
            </div>
            
            <div class="equivalent">â†‘ å·¦å³ã¯åŒã˜å‹•ä½œï¼</div>
        </section>

        <section>
            <h2>Promiseãƒã‚§ãƒ¼ãƒ³ã§ã®ä½¿ç”¨ä¾‹</h2>
            
            <div class="example">
                <h3>ã™ã¹ã¦åŒã˜æ„å‘³ã®æ›¸ãæ–¹</h3>
                <pre><code>// 1. çœç•¥è¨˜æ³•ï¼ˆæœ€ã‚‚ç°¡æ½”ï¼‰
fetch('/api/user')
    .then(response => response.json())
    .then(data => console.log(data));

// 2. æ³¢æ‹¬å¼§ã‚ã‚Šã§return
fetch('/api/user')
    .then(response => {
        return response.json();
    })
    .then(data => {
        return console.log(data);
    });

// 3. é€šå¸¸ã®é–¢æ•°
fetch('/api/user')
    .then(function(response) {
        return response.json();
    })
    .then(function(data) {
        return console.log(data);
    });</code></pre>
                <button class="run-code" onclick="runComparisonDemo()">å‹•ä½œã‚’ç¢ºèª</button>
                <div class="output" id="comparison-output"></div>
            </div>
        </section>

        <section>
            <h2>ã„ã¤çœç•¥è¨˜æ³•ãŒä½¿ãˆã‚‹ï¼Ÿ</h2>
            
            <div class="example">
                <h3>âœ… çœç•¥è¨˜æ³•ãŒä½¿ãˆã‚‹å ´åˆ</h3>
                <pre><code>// 1è¡Œã®å¼
const double = x => x * 2;

// ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
const getLength = str => str.length;

// Promiseãƒã‚§ãƒ¼ãƒ³
promise.then(value => processValue(value));

// é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰
[1, 2, 3].map(n => n * 2);
[1, 2, 3].filter(n => n > 1);</code></pre>
            </div>
            
            <div class="example">
                <h3>âŒ çœç•¥è¨˜æ³•ãŒä½¿ãˆãªã„å ´åˆ</h3>
                <pre><code>// è¤‡æ•°ã®å‡¦ç†ãŒã‚ã‚‹
const processData = data => {
    console.log('å‡¦ç†ä¸­:', data);
    return data * 2; // æ˜ç¤ºçš„ãªreturnãŒå¿…è¦
};

// æ¡ä»¶åˆ†å²ãŒã‚ã‚‹
const checkValue = value => {
    if (value > 0) {
        return 'positive';
    } else {
        return 'negative';
    }
};

// ä¸€æ™‚å¤‰æ•°ã‚’ä½¿ã†
const calculate = (a, b) => {
    const sum = a + b;
    return sum * 2;
};</code></pre>
            </div>
        </section>

        <section>
            <h2>ã‚ˆãã‚ã‚‹é–“é•ã„</h2>
            
            <div class="example">
                <h3>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™æ™‚ã®æ³¨æ„</h3>
                <pre><code>// âŒ ã‚¨ãƒ©ãƒ¼ï¼ {} ãŒã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¨è§£é‡ˆã•ã‚Œã‚‹
const createUser = name => { name: name };

// âœ… æ­£è§£1: æ‹¬å¼§ã§å›²ã‚€
const createUser = name => ({ name: name });

// âœ… æ­£è§£2: returnã‚’ä½¿ã†
const createUser = name => {
    return { name: name };
};</code></pre>
                <button class="run-code" onclick="runObjectReturnDemo()">å‹•ä½œã‚’ç¢ºèª</button>
                <div class="output" id="object-output"></div>
            </div>
        </section>

        <section>
            <h2>å®Ÿè·µçš„ãªä¾‹</h2>
            
            <div class="example">
                <h3>APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†</h3>
                <pre><code>// ã™ã¹ã¦çœç•¥è¨˜æ³•ã§æ›¸ã„ãŸå ´åˆ
fetch('/api/users')
    .then(response => response.json())
    .then(users => users.filter(u => u.active))
    .then(activeUsers => activeUsers.map(u => u.name))
    .then(names => names.sort())
    .then(sortedNames => console.log(sortedNames));

// åŒã˜å‡¦ç†ã‚’æ³¢æ‹¬å¼§ã‚ã‚Šã§æ›¸ã„ãŸå ´åˆ
fetch('/api/users')
    .then(response => {
        return response.json();
    })
    .then(users => {
        return users.filter(u => {
            return u.active;
        });
    })
    .then(activeUsers => {
        return activeUsers.map(u => {
            return u.name;
        });
    })
    .then(names => {
        return names.sort();
    })
    .then(sortedNames => {
        return console.log(sortedNames);
    });</code></pre>
            </div>
        </section>

        <section class="summary">
            <h2>ã¾ã¨ã‚</h2>
            <div class="key-points">
                <h3>è¦šãˆã¦ãŠãã¹ããƒã‚¤ãƒ³ãƒˆ</h3>
                <ul>
                    <li>âœ… <code>response => response.json()</code> ã¯è‡ªå‹•çš„ã«returnã•ã‚Œã‚‹</li>
                    <li>âœ… æ³¢æ‹¬å¼§ {} ãŒãªã„ = æš—é»™ã®return</li>
                    <li>âœ… æ³¢æ‹¬å¼§ {} ãŒã‚ã‚‹ = æ˜ç¤ºçš„ãªreturnãŒå¿…è¦</li>
                    <li>âœ… 1è¡Œã®å¼ãªã‚‰çœç•¥è¨˜æ³•ãŒç°¡æ½”ã§ãŠã™ã™ã‚</li>
                    <li>âœ… è¤‡æ•°è¡Œã®å‡¦ç†ãªã‚‰æ³¢æ‹¬å¼§ã‚’ä½¿ã†</li>
                </ul>
                
                <div class="tip" style="background: #f0f9ff; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
                    <h4>ğŸ’¡ ã¤ã¾ã‚Š</h4>
                    <p><code>.then(response => response.json())</code> ã¯æ­£ã—ãã€returnã¯è‡ªå‹•çš„ã«è¡Œã‚ã‚Œã¦ã„ã¾ã™ï¼</p>
                    <p><code>.then(response => return response.json())</code> ã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®returnçœç•¥è¨˜æ³• - ã‚‚ã†è¿·ã‚ãªã„ï¼</p>
    </footer>

    <script>
        function runComparisonDemo() {
            const output = document.getElementById('comparison-output');
            output.classList.add('show');
            output.textContent = '3ã¤ã®æ›¸ãæ–¹ã‚’ã™ã¹ã¦å®Ÿè¡Œã—ã¾ã™...\n\n';
            
            // æ¨¡æ“¬çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
            const mockResponse = {
                json: () => Promise.resolve({ user: 'å¤ªéƒ', age: 25 })
            };
            
            // 1. çœç•¥è¨˜æ³•
            output.textContent += '1. çœç•¥è¨˜æ³•:\n';
            Promise.resolve(mockResponse)
                .then(response => response.json())
                .then(data => {
                    output.textContent += 'çµæœ: ' + JSON.stringify(data) + '\n\n';
                    
                    // 2. æ³¢æ‹¬å¼§ã‚ã‚Šã§return
                    output.textContent += '2. æ³¢æ‹¬å¼§ã‚ã‚Šã§return:\n';
                    return Promise.resolve(mockResponse);
                })
                .then(response => {
                    return response.json();
                })
                .then(data => {
                    output.textContent += 'çµæœ: ' + JSON.stringify(data) + '\n\n';
                    
                    // 3. é€šå¸¸ã®é–¢æ•°
                    output.textContent += '3. é€šå¸¸ã®é–¢æ•°:\n';
                    return Promise.resolve(mockResponse);
                })
                .then(function(response) {
                    return response.json();
                })
                .then(function(data) {
                    output.textContent += 'çµæœ: ' + JSON.stringify(data) + '\n\n';
                    output.textContent += 'â†’ ã™ã¹ã¦åŒã˜çµæœã«ãªã‚Šã¾ã—ãŸï¼';
                });
        }
        
        function runObjectReturnDemo() {
            const output = document.getElementById('object-output');
            output.classList.add('show');
            output.textContent = '';
            
            try {
                // ã“ã‚Œã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ãŒã€æœŸå¾…ã—ãŸå‹•ä½œã‚’ã—ãªã„
                const wrongCreate = name => { name: name };
                output.textContent += 'âŒ é–“é•ã„: ' + wrongCreate('å¤ªéƒ') + '\n';
                output.textContent += 'ï¼ˆundefinedãŒè¿”ã•ã‚Œã‚‹ï¼‰\n\n';
            } catch (e) {
                output.textContent += 'âŒ ã‚¨ãƒ©ãƒ¼: ' + e.message + '\n\n';
            }
            
            // æ­£ã—ã„æ–¹æ³•1
            const createUser1 = name => ({ name: name });
            output.textContent += 'âœ… æ­£è§£1ï¼ˆæ‹¬å¼§ã§å›²ã‚€ï¼‰: ' + JSON.stringify(createUser1('å¤ªéƒ')) + '\n\n';
            
            // æ­£ã—ã„æ–¹æ³•2
            const createUser2 = name => {
                return { name: name };
            };
            output.textContent += 'âœ… æ­£è§£2ï¼ˆreturnã‚’ä½¿ã†ï¼‰: ' + JSON.stringify(createUser2('å¤ªéƒ'));
        }
    </script>
</body>
</html>